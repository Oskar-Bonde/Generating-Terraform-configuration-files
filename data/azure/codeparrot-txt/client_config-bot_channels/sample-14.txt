terraform {
  required_providers {
    azurerm = {
      source  = "hashicorp/azurerm"
    }
  }
}

# Provider block with features block
provider "azurerm" {
  features {}
}

# create resource group, use name example-resources and set location to West Europe
resource "azurerm_resource_group" "example_resources" {
  name     = "example-resources"
  location = "westus"
}

# data block, azurem client config file, and terraform module will use it
data "azurerm_client_config" "current" {}

# terraform module will use this data block
data "azurerm_client_config" "current" {
  # terraform module will use this data block
  # data "azurerm_client_config" "current" {
  #   # terraform module will use this data block
  #   source = "hashicorp/azurerm"
  # }
}

# create bot channels registration resource. Set location global, sku to F0, microsoft app id from client config id. Assign name and use resource group namevariable to assign to bot channel
resource "azurerm_bot_channel_registration" "bot_channel_registration" {
  name                = "bot-channel-registration"
  location            = "westus"
  resource_group_name = "${azurerm_resource_group.rg.name}"
  sku                 = "West US"
  channel_name        = "bot-channel-registration"
}

