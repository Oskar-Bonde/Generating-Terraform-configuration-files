terraform {
  required_providers {
    azurerm = {
      source  = "hashicorp/azurerm"
    }
  }
}

# Provider block with azurerm resource group
resource "azurerm_resource_group" "rg" {
  name     = "myTFRG"
  location = "westus2"
}

# create resource group
resource "azurerm_resource_group" "rg" {
  name     = "myTFRG"
  location = "westus2"
}

# kubernetes cluster resource group
resource "azurerm_kubernetes_cluster" "cluster" {
  name                = "myTFCluster"
  location            = "westus2"
  resource_group_name = azurerm_resource_group.rg.name
  kubernetes_version    = "1.21.6-gke.17"
  dns_prefix          = "mycluster.local"
  kubernetes_master_type = "master"
  kubernetes_node_type  = "node"
  kubernetes_node_minimum  = "1.5"
  kubernetes_node_private = "2684:10:0a:4f:5a:0c:0f"
  kubernetes_node_public  = "2684:10:0a:4f:5a:0c:0f"
  kubernetes_node_private = "2684:10:0a:4f:5a:0c:0f"
  node_count             = 2
  node_vm_size             = "Standard_A0"
  node_os_disk_size_gb    = "50"
  node_data_disk_size_gb  = "50"
  node_image_uri         = "https://storage.googleapis.com/container-images/container-linux-os-disk.vhd"
  node_image_reference_uri = "https://storage.googleapis.com/container-images/container-linux-os-disk.vhd"
  node_scopes             = ["storage-ro"]
  node_service_account_email = "default"
}

