terraform {
  required_providers {
    azurerm = {
      source  = "hashicorp/azurerm"
    }
  }
}

# Provider block with azurerm resource group
resource "azurerm_resource_group" "rg" {
  name     = "myTFResourceGroup"
  location = "westus2"
}

# create resource group
resource "azurerm_resource_group" "rg" {
  name     = "myTFRG"
  location = "westus2"
}

# kubernetes cluster resource
resource "azurerm_kubernetes_cluster" "cluster" {
  name                = "myTFCluster"
  location            = "westus2"
  resource_group_name = azurerm_resource_group.rg.name
  kubernetes_version    = "1.14.7"
  enable_auto_scaling = true

  # Uncomment this line to delete the resource, or the resource will be destroyed
  lifecycle {
    ignore_changes = [
      # Ignore change for resources which are auto-scaling
      # Reason: https://github.com/hashicorp/terraform/issues/2910
      ignore_changes,
    ]
  }
}

