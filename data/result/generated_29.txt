# Terraform Block with AWS
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
    }
  }
}

# Provider AWS region var.aws_region
variable "aws_region" {
  default = "us-east-1"
}

# variable called aws_region
variable "aws_region" {
  default = "us-east-1"
}

# variable called instance_type
variable "instance_type" {
  default = "t2.micro"
}

# Create EC2 Instance with ami set to data.aws_ami.amzlinux.id. Use instance type variable, count 1 and ssh and web security groups
resource "aws_instance" "web" {
  ami           = data.aws_ami.amzlinux.id
  instance_type = var.instance_type
  count         = 1
  security_groups = [
    "${aws_security_group.ssh.id}",
    "${aws_security_group.web.id}",
  ]
}

# Output block, create EC2 Instance Public IP
output "public_ip" {
  value = "${aws_instance.web.public_ip}"
}

# Output block, Create Public DNS URL
output "public_dns" {
  value = "${aws_instance.web.public_dns}"
}

